<body>
  <pre id="output"></pre>


<script>
  const matrix = [];
  const startNum = Math.floor(Math.random() * 9) + 1;
  const output = document.getElementById("output");
    let result = "";

  // filling first row
  const firstRow = [];
  for (let i = 0; i < 9; i++) {
    let value = startNum + i;
    if (value > 9) value -= 9;
    firstRow.push(value);
  }
  matrix.push(firstRow);

  // filling other rows
  for (let row = 1; row < 9; row++) {
    const prevRow = matrix[row - 1];
    const newRow = [];

    // every third row adds 4, others add 3 to the number
    const increment = (row + 1) % 3 === 0 ? 4 : 3;

    for (let col = 0; col < 9; col++) {
      let value = prevRow[col] + increment;
      if (value > 9) value -= 9;
      newRow.push(value);
    }

    matrix.push(newRow);
  }

  // show
    for (let row of matrix) {
      result += row.join(" ") + "\n";
    }
    output.textContent = result;

  // mix rows
  for (let row = 1; row < 9; row++) {
    const mix1 = Math.floor(Math.random() * 9);
    const mix2 = Math.floor(Math.random() * 9);
    
    [matrix[mix1], matrix[mix2]] = [matrix[mix2], matrix[mix1]];
  }

  // show
    for (let row of matrix) {
      result += row.join(" ") + "\n";
    }
    output.textContent = result;
  </script>
</body>
