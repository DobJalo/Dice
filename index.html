<body>
  <pre id="output"></pre>

  <script>
    const matrix = [];
    const startNum = Math.floor(Math.random() * 9) + 1;
    const output = document.getElementById("output");
    let result = "";

    // filling first row
    const firstRow = [];
    for (let i = 0; i < 9; i++) {
      let value = startNum + i;
      if (value > 9) value -= 9;
      firstRow.push(value);
    }
    matrix.push(firstRow);

    // filling other rows
    for (let row = 1; row < 9; row++) {
      const prevRow = matrix[row - 1];
      const newRow = [];

      // every third row adds 4, others add 3 to the number
      const increment = (row + 1) % 3 === 0 ? 4 : 3;

      for (let col = 0; col < 9; col++) {
        let value = prevRow[col] + increment;
        if (value > 9) value -= 9;
        newRow.push(value);
      }

      matrix.push(newRow);
    }

    // swap rows
    function swapRowsInBlock(matrix, blockIndex) {
      const base = blockIndex * 3;
      let row1 = base + Math.floor(Math.random() * 3);
      let row2 = base + Math.floor(Math.random() * 3);

      while (row1 === row2) {
        row2 = base + Math.floor(Math.random() * 3);
      }

      [matrix[row1], matrix[row2]] = [matrix[row2], matrix[row1]];
    }

    // swap rows in every "three rows" block
    for (let block = 0; block < 3; block++) {
      swapRowsInBlock(matrix, block);
      swapRowsInBlock(matrix, block);
    }

    // show result
    for (let row of matrix) {
      result += row.join(" ") + "\n";
    }
    output.textContent = result;
  </script>
</body>
